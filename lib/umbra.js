"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function r(e,t){return e(t={exports:{}},t.exports),t.exports}var n=r((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncPromisifier=void 0;t.AsyncPromisifier=class{exec(e,t){if(Object.defineProperty(e,"name",{value:t,writable:!1}),1===e.length)return new Promise((t,r)=>{e(e=>{e instanceof Error?r(e):t(e)})});try{return Promise.resolve(e())}catch(e){return Promise.reject(e)}}}}));t(n);n.AsyncPromisifier;var i=r((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.TimeoutPromisifier=t.TimeoutError=void 0;class r extends Error{constructor(e,t,r){super(e),this.timeoutMs=r}}t.TimeoutError=r;t.TimeoutPromisifier=class{wrap(e,t){if(t<=0)return e;const n=Date.now();let i=null;const s=new Promise((e,s)=>{i=setTimeout(()=>{const e=Date.now()-n;s(new r(`Async task timeout exceeded! Elapsed: ${e}, timeout: ${t}ms.`,e,t))},t)});return e.catch(()=>{clearTimeout(i)}),Promise.race([e,s]).then(e=>(clearTimeout(i),e))}}}));t(i);i.TimeoutPromisifier,i.TimeoutError;var s=r((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.mergeConfig=void 0,t.mergeConfig=function(e,t){if(!t||"object"!=typeof t)return e;if("object"==typeof e.timeoutMs&&"object"==typeof t.timeoutMs)for(const r of["it","before","beforeEach","after","afterEach"])"number"==typeof t.timeoutMs[r]&&(e.timeoutMs[r]=t.timeoutMs[r]);else void 0!==t.timeoutMs&&(e.timeoutMs=t.timeoutMs);return e.stopOnFirstFail!==t.stopOnFirstFail&&(e.stopOnFirstFail=t.stopOnFirstFail),e}}));t(s);s.mergeConfig;var o=r((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultTestRunnerConfig=void 0;t.DefaultTestRunnerConfig={timeoutMs:100,stopOnFirstFail:!1}}));t(o);o.DefaultTestRunnerConfig;var c=r((function(e,t){function r(e,t){if(!e)return t||[];if(!t)return e;for(const r of t)-1===e.indexOf(r)&&e.push(r);return e}function n(e,t){if(!e)return[];const r=e.indexOf(t);return-1!==r&&e.splice(r,1),e}Object.defineProperty(t,"__esModule",{value:!0}),t.without=t.union=t.SimpleEventEmitter=void 0,t.union=r,t.without=n;t.SimpleEventEmitter=class{constructor(){this.onListeners={},this.onceListeners={}}on(e,t){this.onListeners[e]=r(this.onListeners[e],[t])}once(e,t){this.onceListeners[e]=r(this.onceListeners[e],[t])}off(e,t){this.onListeners[e]=n(this.onListeners[e],t),this.onceListeners[e]=n(this.onceListeners[e],t)}emit(e,...t){if(this.onListeners[e])for(const r of this.onListeners[e])r.call(null,...t);if(this.onceListeners[e]&&this.onceListeners[e].length>0){for(const r of this.onceListeners[e])r.call(null,...t);this.onceListeners[e]=[]}}emitAndWaitForCompletion(e,...t){const r=[];if(this.onListeners[e])for(const n of this.onListeners[e])try{r.push(Promise.resolve(n.call(null,...t)))}catch(e){r.push(Promise.reject(e))}if(this.onceListeners[e]&&this.onceListeners[e].length>0){for(const n of this.onceListeners[e])try{r.push(Promise.resolve(n.call(null,...t)))}catch(e){r.push(Promise.reject(e))}this.onceListeners[e]=[]}return Promise.all(r).then(e=>{})}}}));t(c);c.without,c.union,c.SimpleEventEmitter;var u=r((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.QueueStack=void 0;t.QueueStack=class{constructor(){this.queue=[]}pushOnTopStack(e){0===this.queue.length?this.queue.push([e]):this.queue[0].push(e)}pushOnBottomStack(e){0===this.queue.length?this.queue.push([e]):this.queue[this.queue.length-1].push(e)}pushStack(e){this.queue.push(e)}unshiftStack(e){this.queue.unshift(e)}popStack(){return this.queue.pop()}shiftStack(){return this.queue.shift()}traverseLevelOrder(e){let t=Promise.resolve();for(let r=0;r<this.queue.length;r++){const n=this.queue[r];for(let r=0;r<n.length;r++)t=t.then(()=>e(n[r]))}return t}traverseInverseLevelOrder(e){let t=Promise.resolve();for(let r=this.queue.length-1;r>=0;r--){const n=this.queue[r];for(let r=n.length-1;r>=0;r--)t=t.then(()=>e(n[r]))}return t}reset(){this.queue=[]}}}));t(u);u.QueueStack;var a=r((function(t,r){var a=e&&e.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{u(n.next(e))}catch(e){s(e)}}function c(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,c)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0}),r.TestRunner=void 0;const l=["before","beforeEach","after","afterEach"];r.TestRunner=class{constructor(e,t=new c.SimpleEventEmitter){this.asyncPromisifier=new n.AsyncPromisifier,this.timeoutPromisifier=new i.TimeoutPromisifier,this.testQueueStack=[],this.queueStacks={before:new u.QueueStack,beforeEach:new u.QueueStack,after:new u.QueueStack,afterEach:new u.QueueStack},this.currentTest=null,this.testRunCancelled=!1,this.describe=(e,t)=>{this.throwIfTestInProgress("describe"),this.pushToCurrentTestQueue("describe",e,t)},this.describeOnly=(e,t)=>{this.throwIfTestInProgress("describe.only"),this.pushToCurrentTestQueue("describe",e,t,!0)},this.describeSkip=(e,t,r)=>{this.throwIfTestInProgress("describe.skip"),this.pushToCurrentTestQueue("describe",e,t,!1,void 0,!0)},this.it=(e,t,r)=>{this.throwIfTestInProgress("it"),this.pushToCurrentTestQueue("it",e,t,!1,r?r.timeoutMs:void 0)},this.itOnly=(e,t,r)=>{this.throwIfTestInProgress("it.only"),this.pushToCurrentTestQueue("it",e,t,!0,r?r.timeoutMs:void 0)},this.itSkip=(e,t,r)=>{this.throwIfTestInProgress("it.skip"),this.pushToCurrentTestQueue("it",e,t,!1,void 0,!0)},this.runNextTestQueue=()=>a(this,void 0,void 0,(function*(){if(0===this.testQueueStack.length)return;let e=!1;const t=this.testQueueStack.shift();if(null!==t.firstOnlyIndex)e=yield this.executeTest(t,t.tests[t.firstOnlyIndex]);else for(let r=0;r<t.tests.length;r++)e=(yield this.executeTest(t,t.tests[r]))||e;e&&(yield this.evaluateQueueWithTimeout("after"))})),this.throwIfTestInProgress=e=>{if(this.currentTest)throw new Error(`Cannot add an ${e} block while executing a test!`)},this.resetRunResults=()=>{this.runResults={elapsedTimeMs:0,totalTests:0,totalSuccesses:0,totalFailures:0,totalTimeouts:0,testResults:[]}},this.config=s.mergeConfig(o.DefaultTestRunnerConfig,e),this.eventEmitter=t,this.it.only=this.itOnly,this.describe.only=this.describeOnly,this.it.skip=this.itSkip,this.describe.skip=this.describeSkip,this.resetRunResults()}setCurrentFile(e){this.lastFilePathSet=e}on(e,t){this.eventEmitter.on(e,t)}once(e,t){this.eventEmitter.once(e,t)}off(e,t){this.eventEmitter.off(e,t)}before(e){this.throwIfTestInProgress("before"),this.queueStacks.before.pushOnBottomStack(e)}beforeEach(e){this.throwIfTestInProgress("beforeEach"),this.queueStacks.beforeEach.pushOnBottomStack(e)}after(e){this.throwIfTestInProgress("after"),this.queueStacks.after.pushOnTopStack(e)}afterEach(e){this.throwIfTestInProgress("afterEach"),this.queueStacks.afterEach.pushOnTopStack(e)}run(){if(this.currentRun)throw new Error("Can't start a test run if one is already in progress!");const e=Date.now();return this.currentRun=this.runNextTestQueue().then(()=>{const t=this.runResults;return t.elapsedTimeMs=Date.now()-e,this.currentRun=null,this.resetRunResults(),t}).catch(e=>{throw this.currentRun=null,e}),this.currentRun}getCurrentTestInfo(){if(!this.currentTest)throw new Error("Can't obtain TestInfo if not actively in a test!");return this.currentTest}reset(){if(this.currentRun)throw new Error("Can't reset if a test run is already in progress!");this.resetRunResults(),this.testRunCancelled=!1,this.testQueueStack=[];for(const e of l)this.queueStacks[e].reset()}cancel(){return this.currentRun?(this.testRunCancelled=!0,this.currentRun.then(e=>(this.reset(),e))):Promise.reject(new Error("Not currently executing a test run! Unable to cancel accordingly."))}pushToCurrentTestQueue(e,t,r,n,i,s){if(0===this.testQueueStack.length){const t={describeTitleChain:[],tests:[],evaluatedBefores:!1,skipAllTests:"describe"===e&&s,firstOnlyIndex:n?0:null};this.testQueueStack.push(t)}const o=this.testQueueStack[this.testQueueStack.length-1],c={type:e,callback:r,describeTitleChain:o.describeTitleChain,title:t,absoluteFilePath:this.lastFilePathSet,skip:s||o.skipAllTests};n&&null===o.firstOnlyIndex&&(o.firstOnlyIndex=o.tests.length),i>0&&(c.timeoutMs=i),o.tests.push(c)}executeTest(e,t){return a(this,void 0,void 0,(function*(){return t.absoluteFilePath!==this.currentlyExecutingFilePath&&(this.currentlyExecutingFilePath=t.absoluteFilePath),!this.testRunCancelled&&("describe"===t.type?this.evaluateDescribe(e,t):this.evaluateTest(e,t))}))}evaluateDescribe(e,t){return a(this,void 0,void 0,(function*(){this.testQueueStack.push({describeTitleChain:[].concat(e.describeTitleChain,t.title),tests:[],evaluatedBefores:!1,skipAllTests:t.skip,firstOnlyIndex:null});for(const e of l)"before"===e||"beforeEach"===e?this.queueStacks[e].pushStack([]):this.queueStacks[e].unshiftStack([]);yield this.asyncPromisifier.exec(t.callback,"describe"),yield this.runNextTestQueue();for(const e of l)"before"===e||"beforeEach"===e?this.queueStacks[e].popStack():this.queueStacks[e].shiftStack();return!1}))}evaluateTest(e,t){return a(this,void 0,void 0,(function*(){if(t.skip){const e={result:"skipped",testInfo:t,elapsedMs:0};return this.eventEmitter.emit("onTestEnd",e),!1}e.evaluatedBefores||(e.evaluatedBefores=!0,yield this.evaluateQueueWithTimeout("before")),yield this.evaluateQueueWithTimeout("beforeEach"),this.currentTest=t;try{yield this.executeTestCallback(t),yield this.evaluateQueueWithTimeout("afterEach")}finally{this.runResults.totalTests++,this.currentTest=null}return!0}))}executeTestCallback(e){return a(this,void 0,void 0,(function*(){const t=Date.now(),r=e.timeoutMs>=0?e.timeoutMs:this.getTimeoutValue("it"),n={testInfo:e};try{yield this.timeoutPromisifier.wrap(this.asyncPromisifier.exec(e.callback,"Test: "+e.title),r),n.result="success"}catch(e){e instanceof i.TimeoutError?n.result="timeout":(n.result="fail",n.error=e)}n.elapsedMs=Date.now()-t;try{yield this.eventEmitter.emitAndWaitForCompletion("onBeforeTestEnd",n)}catch(e){n.result="fail",n.error=e}"success"===n.result?this.runResults.totalSuccesses++:"timeout"===n.result?this.runResults.totalTimeouts++:(this.runResults.totalFailures++,this.config.stopOnFirstFail&&(this.testRunCancelled=!0)),this.runResults.testResults.push(n),this.eventEmitter.emit("onTestEnd",n)}))}evaluateQueueWithTimeout(e){return this.timeoutPromisifier.wrap(this.evaluateQueue(e),this.getTimeoutValue(e))}evaluateQueue(e){return this.queueStacks[e].traverseLevelOrder(t=>this.asyncPromisifier.exec(t,e))}getTimeoutValue(e){const t=this.config.timeoutMs;return"number"==typeof t?t:t[e]}}}));t(a);a.TestRunner;var l=r((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.TestRunner=void 0,Object.defineProperty(t,"TestRunner",{enumerable:!0,get:function(){return a.TestRunner}})}));t(l);l.TestRunner;var h=r((function(e,t){function r(e,t){return e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!n(e)||!n(t)||"object"!=typeof e&&"object"!=typeof t?e===t:function(e,t){let i,s,o,c;if(!n(e)||!n(t))return!1;if(e.prototype!==t.prototype)return!1;try{o=Object.keys(e),c=Object.keys(t)}catch(e){return!1}if(o.length!==c.length)return!1;for(o.sort(),c.sort(),i=o.length-1;i>=0;i--)if(o[i]!==c[i])return!1;for(i=o.length-1;i>=0;i--)if(s=o[i],!r(e[s],t[s]))return!1;return typeof e==typeof t}(e,t))}function n(e){return null!=e}Object.defineProperty(t,"__esModule",{value:!0}),t.deepEqual=void 0,t.deepEqual=r}));t(h);h.deepEqual;var f=r((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.without=t.union=void 0,t.union=function(e,t){if(!e)return t||[];if(!t)return e;for(const r of t)-1===e.indexOf(r)&&e.push(r);return e},t.without=function(e,t){if(!e)return[];const r=e.indexOf(t);return-1!==r&&e.splice(r,1),e}}));t(f);f.without,f.union;var p=r((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleEventEmitter=void 0;t.SimpleEventEmitter=class{constructor(){this.onListeners={},this.onceListeners={}}on(e,t){this.onListeners[e]=f.union(this.onListeners[e],[t])}once(e,t){this.onceListeners[e]=f.union(this.onceListeners[e],[t])}off(e,t){this.onListeners[e]=f.without(this.onListeners[e],t),this.onceListeners[e]=f.without(this.onceListeners[e],t)}emit(e,...t){if(this.onListeners[e])for(const r of this.onListeners[e])r.call(null,...t);if(this.onceListeners[e]&&this.onceListeners[e].length>0){for(const r of this.onceListeners[e])r.call(null,...t);this.onceListeners[e]=[]}}emitAndWaitForCompletion(e,...t){const r=[];if(this.onListeners[e])for(const n of this.onListeners[e])try{r.push(Promise.resolve(n.call(null,...t)))}catch(e){r.push(Promise.reject(e))}if(this.onceListeners[e]&&this.onceListeners[e].length>0){for(const n of this.onceListeners[e])try{r.push(Promise.resolve(n.call(null,...t)))}catch(e){r.push(Promise.reject(e))}this.onceListeners[e]=[]}return Promise.all(r).then(e=>{})}}}));t(p);p.SimpleEventEmitter;var d=r((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SortedArray=void 0;function r(e,t){return e<t?-1:e>t?1:0}t.SortedArray=class{constructor(e=r,t=[]){this.array=[],this.compareFunction=e||r;const n=t.length;for(let e=0;e<n;e++)this.insert(t[e])}getData(){return this.array}insert(e){let t=this.searchInternal(e)+1;const r=this.array.length-1;for(;t<r&&0===this.compareFunction(e,this.array[t]);)t++;let n=this.array.length;for(this.array.push(e);n>t;)this.array[n]=this.array[--n];this.array[t]=e}search(e){const t=this.searchInternal(e);return 0!==this.compareFunction(this.array[t],e)?-1:t}remove(e){const t=this.search(e);t>=0&&this.array.splice(t,1)}searchInternal(e){let t,r,n=this.array.length-1,i=0;for(;n>=i;)if(t=Math.floor((n+i)/2),r=this.compareFunction(this.array[t],e),r<0)i=t+1;else{if(!(r>0))return t;n=t-1}return n}}}));t(d);d.SortedArray;var m=r((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.INTERNAL_MOCKER_NAME=t.printObject=void 0;t.INTERNAL_MOCKER_NAME="__internalMocker",t.printObject=function(e){if(null===e)return"null";if(void 0===e)return"undefined";if(e instanceof RegExp)return e.toString();const t=function(e){const t=e.__internalMocker;return null!=t?t:null}(e);return null!==t?t.mockName:JSON.stringify(e)}}));t(m);m.INTERNAL_MOCKER_NAME,m.printObject;var g=r((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.matcher=t.regexMatches=t.startsWith=t.lte=t.lt=t.gte=t.gt=t.eq=t.any=void 0,t.any=function(){const e={precedence:-1,matches:()=>!0,description:()=>"any()",equals:t=>t.description()===e.description()};return e},t.gt=function(e){const t={matches:t=>t>e,description:()=>`gt(${m.printObject(e)})`,equals:e=>e.description()===t.description()};return t},t.lt=function(e){const t={matches:t=>t<e,description:()=>`lt(${m.printObject(e)})`,equals:e=>e.description()===t.description()};return t},t.gte=function(e){const t={matches:t=>t>=e,description:()=>`gte(${m.printObject(e)})`,equals:e=>e.description()===t.description()};return t},t.lte=function(e){const t={matches:t=>t<=e,description:()=>`lte(${m.printObject(e)})`,equals:e=>e.description()===t.description()};return t},t.eq=function(e){const t={precedence:1,matches:t=>h.deepEqual(e,t),description:()=>m.printObject(e),equals:e=>e.description()===t.description()};return t},t.startsWith=function(e){const t={matches:t=>t.startsWith(e),description:()=>"startsWith "+e,equals:e=>e.description()===t.description()};return t},t.regexMatches=function(e){const t={matches:t=>e.test(t),description:()=>e.toString(),equals:e=>e.description()===t.description()};return t},t.matcher=function(e){const t={matches:t=>e(t),description:()=>e.toString(),equals:e=>e.description()===t.description()};return t}}));t(g);g.matcher,g.regexMatches,g.startsWith,g.lte,g.lt,g.gte,g.gt,g.eq,g.any;var y=r((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.printObject=t.INTERNAL_MOCKER_NAME=t.startsWith=t.regexMatches=t.matcher=t.lte=t.lt=t.gte=t.gt=t.eq=t.any=t.SimpleEventEmitter=t.SortedArray=t.deepEqual=void 0,Object.defineProperty(t,"deepEqual",{enumerable:!0,get:function(){return h.deepEqual}}),Object.defineProperty(t,"SimpleEventEmitter",{enumerable:!0,get:function(){return p.SimpleEventEmitter}}),Object.defineProperty(t,"SortedArray",{enumerable:!0,get:function(){return d.SortedArray}}),Object.defineProperty(t,"any",{enumerable:!0,get:function(){return g.any}}),Object.defineProperty(t,"eq",{enumerable:!0,get:function(){return g.eq}}),Object.defineProperty(t,"gt",{enumerable:!0,get:function(){return g.gt}}),Object.defineProperty(t,"gte",{enumerable:!0,get:function(){return g.gte}}),Object.defineProperty(t,"lt",{enumerable:!0,get:function(){return g.lt}}),Object.defineProperty(t,"lte",{enumerable:!0,get:function(){return g.lte}}),Object.defineProperty(t,"matcher",{enumerable:!0,get:function(){return g.matcher}}),Object.defineProperty(t,"regexMatches",{enumerable:!0,get:function(){return g.regexMatches}}),Object.defineProperty(t,"startsWith",{enumerable:!0,get:function(){return g.startsWith}}),Object.defineProperty(t,"INTERNAL_MOCKER_NAME",{enumerable:!0,get:function(){return m.INTERNAL_MOCKER_NAME}}),Object.defineProperty(t,"printObject",{enumerable:!0,get:function(){return m.printObject}})}));t(y);y.printObject,y.INTERNAL_MOCKER_NAME,y.startsWith,y.regexMatches,y.matcher,y.lte,y.lt,y.gte,y.gt,y.eq,y.any,y.SimpleEventEmitter,y.SortedArray,y.deepEqual;var b=r((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.assert=void 0;class r extends Error{constructor(e,t){super(t?e+"\n"+t:e)}}class n{static that(e){}static equal(e,t,n){if(!y.deepEqual(e,t))throw new r(`Expected ${y.printObject(t)} to deeply equal ${y.printObject(e)}`,n)}static notEqual(e,t,n){if(y.deepEqual(e,t))throw new r(`Expected ${y.printObject(t)} to not deeply equal ${y.printObject(e)}`,n)}static looseEqual(e,t,n){if(t!=e)throw new r(`Expected ${y.printObject(e)} == ${y.printObject(t)}`,n)}static notLooseEqual(e,t,n){if(t==e)throw new r(`Expected ${y.printObject(e)} != ${y.printObject(t)}`,n)}static strictEqual(e,t,n){if(!Object.is(t,e))throw new r(`Expected ${y.printObject(e)} to strictly equal ${y.printObject(t)}`,n)}static notStrictEqual(e,t,n){if(Object.is(t,e))throw new r(`Expected ${y.printObject(e)} to not strictly equal ${y.printObject(t)}`,n)}static is(e,t,r){n.strictEqual(e,t,r)}static has(e,t,r,i){n.exists(e,"target"),n.exists(t,"keyPath"),n.exists(e,"target");const s=t.split(".");let o=e;for(const e of s){const t=o[e];t||n.fail(`Missing key "${e}" in object ${y.printObject(o)}\nAvailable keys: ${y.printObject(Object.keys(r))}`),o=t}n.strictEqual(o,r,i)}static regexMatches(e,t,n){if(!t.test(e))throw new r(`Expected ${y.printObject(e)} to match the regex ${y.printObject(t)}`,n)}static resolvesTo(e,t,i){return e.then(e=>{n.equal(e,t)},e=>{throw new r(`Promise should not have successfully resolved.\nException: ${e}\n`,i)})}static rejects(e,t,i){const s=t instanceof Error?t.message:t;return e.then(()=>{throw new r("Promise should not have successfully resolved",i)},e=>{s&&n.equal(s,e.message)})}static fail(e){throw new r("Test failed",e)}static isTrue(e,t){n.equal(!0,e,t)}static isFalse(e,t){n.equal(!1,e,t)}static isTruthy(e,t){if(!e)throw new r(`Expected ${e} to be truthy`,t)}static isFalsy(e,t){if(e)throw new r(`Expected ${e} to be falsy`,t)}static exists(e,t){return this.notEqual(e,null,`Expected ${y.printObject(e)} to not be null. ${t}`),this.notEqual(e,void 0,`Expected ${y.printObject(e)} to not be undefined. ${t}`),!0}static contains(e,t,r){if(this.exists(e),"string"==typeof e)n.isTrue(-1!==e.indexOf(t),`String: ${t} was not found in ${e}`);else if(Array.isArray(e))n.isTrue(-1!==e.indexOf(t),`${y.printObject(t)} was not found in target array ${y.printObject(e)}. ${null!=r?r:""}`);else for(const[r,i]of Object.entries(t))n.equal(e[r],i)}static containsAll(e,t,r){this.exists(e),this.exists(t);for(const i of t)n.contains(e,i,r)}static matchesSnapshotFile(e){}static matchesSnapshotString(e,t){}}t.assert=n}));t(b);b.assert;var O=r((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.expect=t.Expect=void 0;class r{constructor(e){this.target=e}toBe(e){b.assert.equal(this.target,e)}toHaveProperty(e,t){b.assert.has(this.target,e,t)}toBeTruthy(){b.assert.isTruthy(this.target)}toBeFalsy(){b.assert.isFalsy(this.target)}}t.Expect=r,t.expect=function(e){return new r(e)}}));t(O);O.expect,O.Expect;var v=r((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Expect=t.expect=t.assert=void 0,Object.defineProperty(t,"assert",{enumerable:!0,get:function(){return b.assert}}),Object.defineProperty(t,"Expect",{enumerable:!0,get:function(){return O.Expect}}),Object.defineProperty(t,"expect",{enumerable:!0,get:function(){return O.expect}})}));t(v);v.Expect,v.expect,v.assert;var M=r((function(e,t){function r(e,t){return e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!n(e)||!n(t)||"object"!=typeof e&&"object"!=typeof t?e===t:function(e,t){let i,s,o,c;if(!n(e)||!n(t))return!1;if(e.prototype!==t.prototype)return!1;try{o=Object.keys(e),c=Object.keys(t)}catch(e){return!1}if(o.length!==c.length)return!1;for(o.sort(),c.sort(),i=o.length-1;i>=0;i--)if(o[i]!==c[i])return!1;for(i=o.length-1;i>=0;i--)if(s=o[i],!r(e[s],t[s]))return!1;return typeof e==typeof t}(e,t))}function n(e){return null!=e}Object.defineProperty(t,"__esModule",{value:!0}),t.deepEqual=void 0,t.deepEqual=r}));t(M);M.deepEqual;var E=r((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.without=t.union=void 0,t.union=function(e,t){if(!e)return t||[];if(!t)return e;for(const r of t)-1===e.indexOf(r)&&e.push(r);return e},t.without=function(e,t){if(!e)return[];const r=e.indexOf(t);return-1!==r&&e.splice(r,1),e}}));t(E);E.without,E.union;var x=r((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleEventEmitter=void 0;t.SimpleEventEmitter=class{constructor(){this.onListeners={},this.onceListeners={}}on(e,t){this.onListeners[e]=E.union(this.onListeners[e],[t])}once(e,t){this.onceListeners[e]=E.union(this.onceListeners[e],[t])}off(e,t){this.onListeners[e]=E.without(this.onListeners[e],t),this.onceListeners[e]=E.without(this.onceListeners[e],t)}emit(e,...t){if(this.onListeners[e])for(const r of this.onListeners[e])r.call(null,...t);if(this.onceListeners[e]&&this.onceListeners[e].length>0){for(const r of this.onceListeners[e])r.call(null,...t);this.onceListeners[e]=[]}}emitAndWaitForCompletion(e,...t){const r=[];if(this.onListeners[e])for(const n of this.onListeners[e])try{r.push(Promise.resolve(n.call(null,...t)))}catch(e){r.push(Promise.reject(e))}if(this.onceListeners[e]&&this.onceListeners[e].length>0){for(const n of this.onceListeners[e])try{r.push(Promise.resolve(n.call(null,...t)))}catch(e){r.push(Promise.reject(e))}this.onceListeners[e]=[]}return Promise.all(r).then(e=>{})}}}));t(x);x.SimpleEventEmitter;var k=r((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SortedArray=void 0;function r(e,t){return e<t?-1:e>t?1:0}t.SortedArray=class{constructor(e=r,t=[]){this.array=[],this.compareFunction=e||r;const n=t.length;for(let e=0;e<n;e++)this.insert(t[e])}getData(){return this.array}insert(e){let t=this.searchInternal(e)+1;const r=this.array.length-1;for(;t<r&&0===this.compareFunction(e,this.array[t]);)t++;let n=this.array.length;for(this.array.push(e);n>t;)this.array[n]=this.array[--n];this.array[t]=e}search(e){const t=this.searchInternal(e);return 0!==this.compareFunction(this.array[t],e)?-1:t}remove(e){const t=this.search(e);t>=0&&this.array.splice(t,1)}searchInternal(e){let t,r,n=this.array.length-1,i=0;for(;n>=i;)if(t=Math.floor((n+i)/2),r=this.compareFunction(this.array[t],e),r<0)i=t+1;else{if(!(r>0))return t;n=t-1}return n}}}));t(k);k.SortedArray;var P=r((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.INTERNAL_MOCKER_NAME=t.printObject=void 0;t.INTERNAL_MOCKER_NAME="__internalMocker";function r(e){return"symbol"==typeof e||"number"==typeof e?String(e):`"${String(e).replace(/"/g,'\\"').replace(/\\?'/g,"\\'").replace(/\r/g,"\\r").replace(/\n/g,"\\n")}"`}t.printObject=function(e){const t=[],n=(e,i="  ")=>{if(null===e)return"null";if(void 0===e)return"undefined";if(e instanceof RegExp)return e.toString();if(e instanceof Date)return`new Date("${e.toISOString()}")`;if(e instanceof Error)return`new Error(${e.message})`;if(-1!==t.indexOf(e))return"[[Circular Object Reference]]";const s=function(e){const t=e.__internalMocker;return null!=t?t:null}(e);if(null!==s)return s.mockName;const o=typeof e;if("function"===o||"boolean"===o||"number"===o||"symbol"===o)return String(e);if(Array.isArray(e)){const r=[];t.push(e);for(const t of e)r.push(`${i}${n(t,i+"  ")}`);return t.pop(),`[\n${r.join(",\n")}\n${i.substr("  ".length)}]`}if(e instanceof Object){t.push(e);const s=Reflect.ownKeys(e),o=[];for(const t of s)o.push(`${i}${r(t)}: ${n(Reflect.get(e,t),i+"  ")}`);return t.pop(),`{\n${o.join(",\n")}\n${i.substr("  ".length)}}`}return r(e)};return n(e)}}));t(P);P.INTERNAL_MOCKER_NAME,P.printObject;var j=r((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.matcher=t.regexMatches=t.startsWith=t.lte=t.lt=t.gte=t.gt=t.eq=t.any=void 0,t.any=function(){const e={precedence:-1,matches:()=>!0,description:()=>"any()",equals:t=>t.description()===e.description()};return e},t.gt=function(e){const t={matches:t=>t>e,description:()=>`gt(${P.printObject(e)})`,equals:e=>e.description()===t.description()};return t},t.lt=function(e){const t={matches:t=>t<e,description:()=>`lt(${P.printObject(e)})`,equals:e=>e.description()===t.description()};return t},t.gte=function(e){const t={matches:t=>t>=e,description:()=>`gte(${P.printObject(e)})`,equals:e=>e.description()===t.description()};return t},t.lte=function(e){const t={matches:t=>t<=e,description:()=>`lte(${P.printObject(e)})`,equals:e=>e.description()===t.description()};return t},t.eq=function(e){const t={precedence:1,matches:t=>M.deepEqual(e,t),description:()=>P.printObject(e),equals:e=>e.description()===t.description()};return t},t.startsWith=function(e){const t={matches:t=>t.startsWith(e),description:()=>"startsWith "+e,equals:e=>e.description()===t.description()};return t},t.regexMatches=function(e){const t={matches:t=>e.test(t),description:()=>e.toString(),equals:e=>e.description()===t.description()};return t},t.matcher=function(e){const t={matches:t=>e(t),description:()=>e.toString(),equals:e=>e.description()===t.description()};return t}}));t(j);j.matcher,j.regexMatches,j.startsWith,j.lte,j.lt,j.gte,j.gt,j.eq,j.any;var w=r((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.printObject=t.INTERNAL_MOCKER_NAME=t.startsWith=t.regexMatches=t.matcher=t.lte=t.lt=t.gte=t.gt=t.eq=t.any=t.SimpleEventEmitter=t.SortedArray=t.deepEqual=void 0,Object.defineProperty(t,"deepEqual",{enumerable:!0,get:function(){return M.deepEqual}}),Object.defineProperty(t,"SimpleEventEmitter",{enumerable:!0,get:function(){return x.SimpleEventEmitter}}),Object.defineProperty(t,"SortedArray",{enumerable:!0,get:function(){return k.SortedArray}}),Object.defineProperty(t,"any",{enumerable:!0,get:function(){return j.any}}),Object.defineProperty(t,"eq",{enumerable:!0,get:function(){return j.eq}}),Object.defineProperty(t,"gt",{enumerable:!0,get:function(){return j.gt}}),Object.defineProperty(t,"gte",{enumerable:!0,get:function(){return j.gte}}),Object.defineProperty(t,"lt",{enumerable:!0,get:function(){return j.lt}}),Object.defineProperty(t,"lte",{enumerable:!0,get:function(){return j.lte}}),Object.defineProperty(t,"matcher",{enumerable:!0,get:function(){return j.matcher}}),Object.defineProperty(t,"regexMatches",{enumerable:!0,get:function(){return j.regexMatches}}),Object.defineProperty(t,"startsWith",{enumerable:!0,get:function(){return j.startsWith}}),Object.defineProperty(t,"INTERNAL_MOCKER_NAME",{enumerable:!0,get:function(){return P.INTERNAL_MOCKER_NAME}}),Object.defineProperty(t,"printObject",{enumerable:!0,get:function(){return P.printObject}})}));t(w);w.printObject,w.INTERNAL_MOCKER_NAME,w.startsWith,w.regexMatches,w.matcher,w.lte,w.lt,w.gte,w.gt,w.eq,w.any,w.SimpleEventEmitter,w.SortedArray,w.deepEqual;var T=r((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.newCapture=void 0;class r{constructor(){this.all=[]}get first(){return 0===this.all.length?null:this.all[0]}get last(){return 0===this.all.length?null:this.all[this.all.length-1]}matches(e){return this.all.push(e),!0}description(){return 0===this.all.length?"Argument captor. No arguments captured":"Argument captor. Currently captured args: "+this.all}equals(e){return e instanceof r&&e.all===this.all}}t.newCapture=function(){return new r}}));t(T);T.newCapture;var R=r((function(e,t){var r;function n(e){if(null==e)return null;const t=e[w.INTERNAL_MOCKER_NAME];return null!=t?t:null}function i(e){return new Error("Passed an object that was not a mock. Object provided: "+w.printObject(e))}Object.defineProperty(t,"__esModule",{value:!0}),t.MockType=t.INTERNAL_MOCKER_NAME=t.createInvalidMockError=t.GetInternalMockerSafe=t.GetInternalMocker=t.CreateInternalMocker=void 0,Object.defineProperty(t,"INTERNAL_MOCKER_NAME",{enumerable:!0,get:function(){return w.INTERNAL_MOCKER_NAME}}),function(e){e[e.Instance=0]="Instance",e[e.Static=1]="Static",e[e.Partial=2]="Partial"}(r||(r={})),t.MockType=r,t.GetInternalMockerSafe=n,t.GetInternalMocker=function(e){const t=n(e);if(null===t)throw i(e);return t},t.createInvalidMockError=i,t.CreateInternalMocker=function(e,t,r,n,i){const s={expectations:[],recordedInvocations:[],realFunction:t,options:n,inProgressInOrder:[],isInExpectation:!1,mockName:null!=r?r:"mock",mockType:i};return e[w.INTERNAL_MOCKER_NAME]=s,s}}));t(R);R.MockType,R.INTERNAL_MOCKER_NAME,R.createInvalidMockError,R.GetInternalMockerSafe,R.GetInternalMocker,R.CreateInternalMocker;var S=r((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.StacktraceUtils=void 0;t.StacktraceUtils=class{static getCurrentMockLocation(e){const t=(new Error).stack;if(void 0===t)return null;const r=t.split("\n"),n=r.length;if(n<e+2)return null;let i=2,s=null;for(;i<n;i++)if(s=r[i],/(expect|InvocationHandler\.apply).*umbra/.test(s)){i++,s=r[i];break}if(null===s)return null;const o=/.*?\((.*?)\)/.exec(s);return null===o?null:o[1]}}}));t(S);S.StacktraceUtils;var _=r((function(e,t){function r(e,t){const r=new w.SortedArray((e,t)=>{if(void 0===e&&void 0===t)return 0;if(void 0===e)return 1;if(void 0===t)return-1;if(null!==e.inOrderOverride&&null==t.inOrderOverride)return-1;if(null===e.inOrderOverride&&null!==t.inOrderOverride)return 1;if(null===e.expectedArgs&&null===t.expectedArgs)return 0;if(null===e.expectedArgs)return 1;if(null===t.expectedArgs)return-1;const r=t.expectedArgs.length-e.expectedArgs.length;if(0!==r)return r;const i=n(e.expectedArgs);return n(t.expectedArgs)-i});for(const t of e)r.insert(t);for(const e of r.getData()){if(e.callCount>=e.expectedRange.end)continue;if(i(e.expectedArgs,t))return e}return null}function n(e){let t=0;for(const r of e)t+=void 0!==r.precedence?r.precedence:0;return t}function i(e,t){if(null===e)return!0;if(t.length<e.length)return!1;let r=!0;0===e.length&&(r=0===t.length);for(let n=0;n<e.length;n++){const i=e[n],s=t[n];r=r&&i.matches(s)}return r}Object.defineProperty(t,"__esModule",{value:!0}),t.verifyArgumentMatcher=t.findBestArgumentMatcher=t.createMockedFunction=void 0,t.findBestArgumentMatcher=r,t.verifyArgumentMatcher=i;const s={includeLocation:!0};function o(e,t=s){let r="\t"+(e.internalMocker.mockName||"mock");if(null===e.expectedArgs)r+="() with any arguments";else{const t=[];for(const r of e.expectedArgs)r.description?t.push(r.description()):t.push(r.toString());r+=`(${t.join(", ")})`}return r+=`. Expected ${e.expectedRange.describeRange()}, so far ${e.callCount}.`,t.includeLocation&&(r+="\n\tExpectation set at "+e.location),r+"\n"}t.createMockedFunction=function(){const e=function(...t){const n=R.GetInternalMocker(e),i=S.StacktraceUtils.getCurrentMockLocation(2);n.recordedInvocations.push({params:t,location:i});const s=r(n.expectations,t);if(null!==s){if(s.inOrderOverride){const e=s.inOrderOverride,t=e.expectations[e.currentIndex];if(t!==s){const e=o(t);throw new Error(`Out of order method call.\nExpected:\n${e}\nActual:\n`+o(s,{includeLocation:!1})+"\tCalled at "+i)}if(0===e.currentIndex&&n.inProgressInOrder.push(e),e.currentIndex++,e.currentIndex>e.expectations.length){const t=n.inProgressInOrder.indexOf(e);if(-1===t)throw new Error("Could not find in progress index");n.inProgressInOrder.splice(t,1)}}else if(n.inProgressInOrder.length>0)throw new Error("Out of order method call.");if(s.callCount++,!s.answer)return;return s.answer(...t)}if(n.mockType===R.MockType.Partial)return n.realFunction.apply(this,t);if(n.options.strictMode===q.StrictnessMode.Strict){let r="";for(const e of n.expectations)r+=o(e)+"\n";r=r?`\nExpectations:\n${r} `:"";const i=n.expectations.length>0?"matched":"was set",s=[];for(const e of t)s.push(w.printObject(e));const c=s.join(", ");throw new Error(`${e.name}(${c}) was called but no expectation ${i}.${r}`)}return null};return e}}));t(_);_.verifyArgumentMatcher,_.findBestArgumentMatcher,_.createMockedFunction;var A=r((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Range=void 0;t.Range=class{constructor(e,t=e){if(e<0)throw new Error("Start value must be >= 0. Received "+e);if(t<1)throw Error("End value must be >= 1. Received "+t);if(e>t)throw new Error(`Start must be <= end. Start: ${e} End: ${t}`);this.start=e,this.end=t}isFixedRange(){return this.start===this.end}isInRange(e){return e>=this.start&&e<=this.end}hasNoUpperBound(){return this.end===Number.MAX_SAFE_INTEGER}describeRange(){return this.isFixedRange()?this.start+" invocations":this.hasNoUpperBound()?`at least ${this.start} invocations`:`between ${this.start} and ${this.end} invocations`}}}));t(A);A.Range;var I=r((function(e,t){function r(e){return function(){return e}}function n(e){return function(){throw e}}function i(e){return function(){return Promise.resolve(e)}}function s(e){return function(){return Promise.reject(e)}}function o(e){const t=[];for(const r of e){const e=null===R.GetInternalMockerSafe(r)&&"function"==typeof r.matches?r:w.eq(r);t.push(e)}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeMatcherArgs=t.OnGoingStubs=void 0,t.normalizeMatcherArgs=o;class c extends v.Expect{constructor(e){if(super(e),this.atMostCount=-1,this.atLeastCount=-1,this.timesCount=-1,this.mockedFunction=e,this.internalMocker=R.GetInternalMockerSafe(e),this.currentArgumentExpectations=null,this.internalMocker){this.internalMocker.isInExpectation=!0;const e={internalMocker:this.internalMocker,expectedRange:new A.Range(1),location:S.StacktraceUtils.getCurrentMockLocation(3),answer:null,expectedArgs:this.currentArgumentExpectations,callCount:0,inOrderOverride:null};this.internalMocker.expectations.push(e),this.expectation=e}else this.expectation=null}getExpectation(){if(null===this.expectation)throw new Error("Tried to access expectation on an invalid mock");return this.expectation}withArgs(...e){if(null===this.expectation)throw new Error("Cannot set arguments expectations, an invalid mock object was provided");return this.currentArgumentExpectations=o(e),this.expectation.expectedArgs=this.currentArgumentExpectations,this}andReturn(e){if(null===this.expectation)throw R.createInvalidMockError(this.mockedFunction);return this.expectation.answer=r(e),this}andStubReturn(e){if(null===this.expectation)throw R.createInvalidMockError(this.mockedFunction);this.expectation.answer=r(e),this.atLeast(0)}andThrow(e){if(null===this.expectation)throw R.createInvalidMockError(this.mockedFunction);return this.expectation.answer=n(e),this}andStubThrow(e){if(null===this.expectation)throw R.createInvalidMockError(this.mockedFunction);this.expectation.answer=n(e),this.atLeast(0)}andCallRealMethod(){if(null===this.expectation||null===this.internalMocker)throw R.createInvalidMockError(this.mockedFunction);const e=this.internalMocker.realFunction;if(!e)throw new Error("No function was available. Ensure a real object was passed to the spy");return this.expectation.answer=function(e){return function(...t){return e(t)}}(e),this}andAnswer(e){if(null===this.expectation)throw R.createInvalidMockError(this.mockedFunction);return this.expectation.answer=e,this}andStubAnswer(e){if(null===this.expectation)throw R.createInvalidMockError(this.mockedFunction);this.expectation.answer=e,this.atLeast(0)}andResolve(e){if(null===this.expectation)throw R.createInvalidMockError(this.mockedFunction);return this.expectation.answer=i(e),this}andStubResolve(e){if(null===this.expectation)throw R.createInvalidMockError(this.mockedFunction);this.expectation.answer=i(e),this.atLeast(0)}andReject(e){if(null===this.expectation)throw R.createInvalidMockError(this.mockedFunction);return this.expectation.answer=s(e),this}andStubReject(e){if(null===this.expectation)throw R.createInvalidMockError(this.mockedFunction);this.expectation.answer=s(e),this.atLeast(0)}times(e){if(null===this.expectation)throw R.createInvalidMockError(this.mockedFunction);if(-1!==this.timesCount||-1!==this.atLeastCount||-1!==this.atMostCount)throw new Error("Previously set expectation count, value must only be set once");return this.timesCount=e,this.setExpectedRange(new A.Range(e)),this}once(){return this.times(1)}twice(){return this.times(2)}atMost(e){if(null===this.expectation)throw R.createInvalidMockError(this.mockedFunction);if(-1!==this.timesCount||-1!==this.atMostCount&&this.atMostCount!==Number.MAX_SAFE_INTEGER)throw new Error("Previously set expectation count, value must only be set once");return this.atMostCount=e,this.atLeastCount=-1!==this.atLeastCount?this.atLeastCount:0,this.setExpectedRange(new A.Range(this.atLeastCount,this.atMostCount)),this}atLeast(e){if(-1!==this.timesCount||-1!==this.atLeastCount&&0!==this.atLeastCount)throw new Error("Previously set expectation count, value must only be set once");return this.atLeastCount=e,this.atMostCount=-1!==this.atMostCount?this.atMostCount:Number.MAX_SAFE_INTEGER,this.setExpectedRange(new A.Range(this.atLeastCount,this.atMostCount)),this}setExpectedRange(e){const t=this.internalMocker.expectations;if(t.length>1&&e.isFixedRange()){const e=t[t.length-1],r=t[t.length-2];if(!r.expectedRange.isFixedRange()&&this.doArgumentsMatch(r,e))throw new Error("Previous expectation had a non fixed range.")}this.expectation.expectedRange=e}doArgumentsMatch(e,t){if(null===t.expectedArgs||null===e.expectedArgs)return null===e.expectedArgs&&null===t.expectedArgs;if(t.expectedArgs.length!==e.expectedArgs.length)return!1;for(let r=0;r<t.expectedArgs.length;r++){const n=e.expectedArgs[r];if(!t.expectedArgs[r].equals(n))return!1}return!0}}t.OnGoingStubs=c}));t(I);I.normalizeMatcherArgs,I.OnGoingStubs;var C=r((function(e,t){function r(e){const t=R.GetInternalMocker(e),i=Object.keys(e);for(const t of i){const n=e[t];if(n){R.GetInternalMockerSafe(n)&&r(n)}}t.isInExpectation=!1,n(t.expectations),n(t.inProgressInOrder),n(t.recordedInvocations)}function n(e){for(;e.length>0;)e.shift()}function i(e){const t=R.GetInternalMocker(e),r=Reflect.ownKeys(e);for(const t of r){const r=Reflect.get(e,t);if(r){R.GetInternalMockerSafe(r)&&i(r)}}for(const e of t.expectations)if(!e.expectedRange.isInRange(e.callCount))throw new Error(s(t.recordedInvocations,e))}function s(e,t){const r=function(e,t){const r=[];for(const n of t)null===e&&null!==n.location&&r.push(n.location);return r}(t.expectedArgs,e),n=(i=t.expectedRange,s=t.callCount,`Expected ${i.describeRange()}, got ${s}.`);var i,s;const o=r.length>0?"Called at:\n"+r.join("\n"):"";return`${n}\nExpected at: ${t.location}\n${o}\n `}Object.defineProperty(t,"__esModule",{value:!0}),t.verify=t.reset=void 0,t.verify=function(...e){for(const t of e)i(t)},t.reset=function(...e){for(const t of e)r(t)}}));t(C);C.verify,C.reset;var L=r((function(t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createdMocks=void 0;let n=null;r.createdMocks=n;const i=e.__testRunner;i&&(r.createdMocks=n=[],i.on("testSuccess",()=>{for(const e of n)C.verify(e);r.createdMocks=n=[]}),i.on("testFail",()=>{r.createdMocks=n=[]}),i.on("testTimeout",()=>{r.createdMocks=n=[]}))}));t(L);L.createdMocks;var q=r((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.StrictnessMode=t.setDefaultOptions=t.expect=t.staticMock=t.partialMock=t.mock=t.inOrder=void 0;const r=Object.prototype;var n;!function(e){e[e.Strict=0]="Strict",e[e.Loose=1]="Loose"}(n||(n={})),t.StrictnessMode=n;class i{constructor(e,t,r,n,i,s){this.classPrototype=e,this.realObject=r,this.mockName=n,this.options=i,this.mockType=s,null!==this.mockName&&Reflect.defineProperty(r,"name",{value:this.mockName}),this.internalMocker=R.CreateInternalMocker(t,r,this.mockName,this.options,this.mockType)}apply(e,t,r){return e.apply(t,r)}construct(e,t,r){return this.mockType===R.MockType.Partial?c(new this.realObject(...t)):{}}get(e,t,r){if(t===R.INTERNAL_MOCKER_NAME)return this.internalMocker;let n,i=Reflect.get(this.realObject,t,r);if(void 0!==i&&("function"!=typeof i||this.mockType!==R.MockType.Partial||null!==R.GetInternalMockerSafe(i)))return i;if(this.classPrototype&&void 0===i){const e=this.getPropertyDescriptor(this.classPrototype,t);if(void 0!==e)i=e.value;else if(this.mockType===R.MockType.Instance)return}this.realObject instanceof Promise&&"then"===t&&(i=i.bind(this.realObject));const s=null!==this.mockName?`${this.mockName}.${t.toString()}`:t.toString();switch(this.mockType){case R.MockType.Instance:n=o(i,s);break;case R.MockType.Static:case R.MockType.Partial:if(!i)return i;n=c(i);break;default:throw new Error("Unknown mock type "+R.MockType[this.mockType])}return Reflect.set(this.realObject,t,n),n}deleteProperty(e,t){return Reflect.deleteProperty(this.realObject,t)}set(e,t,r,n){return Reflect.set(this.realObject,t,r,n)}ownKeys(e){let t=Reflect.ownKeys(e);this.mockType===R.MockType.Static&&(t=t.concat(Reflect.ownKeys(this.classPrototype)));const r=Reflect.ownKeys(this.realObject),n=r.indexOf(R.INTERNAL_MOCKER_NAME);-1!==n&&r.splice(n,1);for(const e of t)e!==R.INTERNAL_MOCKER_NAME&&-1===r.indexOf(e)&&r.push(e);return r}getOwnPropertyDescriptor(e,t){const r=Reflect.getOwnPropertyDescriptor(e,t);return void 0!==r?r:Reflect.getOwnPropertyDescriptor(this.realObject,t)}getPropertyDescriptor(e,t){if(!e)return;let n=e;for(;n!==r;){const e=Reflect.getOwnPropertyDescriptor(n,t);if(void 0!==e)return e;n=Reflect.getPrototypeOf(n)}}}let s={strictMode:n.Strict,inOrder:!1};function o(e,t,r=s){const n=_.createMockedFunction();"string"==typeof e&&(t=e,e=void 0),t||(t=null);const o=new Proxy(n,new i(e?e.prototype:null,n,n,t,r,R.MockType.Instance));return L.createdMocks&&L.createdMocks.push(o),o}function c(e,t=null,r=s){const n="function"==typeof e?_.createMockedFunction():{};return new Proxy(n,new i(Object.getPrototypeOf(e),n,e,t,r,R.MockType.Partial))}t.setDefaultOptions=function(e){s=Object.assign(s,e)},t.mock=o,t.staticMock=function(e){const t=_.createMockedFunction();return new Proxy(t,new i(e,t,t,null,s,R.MockType.Static))},t.partialMock=c,t.expect=function(e){return new I.OnGoingStubs(e)},t.inOrder=function(...e){const t={expectations:[],currentIndex:0},r=e;for(const e of r){const r=e.getExpectation();t.expectations.push(r),r.inOrderOverride=t}}}));t(q);q.StrictnessMode,q.setDefaultOptions,q.expect,q.staticMock,q.partialMock,q.mock,q.inOrder;var N=r((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.newCapture=t.matcher=t.regexMatches=t.startsWith=t.lte=t.lt=t.gte=t.gt=t.eq=t.any=t.setDefaultOptions=t.inOrder=t.verify=t.reset=t.expect=t.staticMock=t.partialMock=t.mock=void 0,Object.defineProperty(t,"any",{enumerable:!0,get:function(){return w.any}}),Object.defineProperty(t,"eq",{enumerable:!0,get:function(){return w.eq}}),Object.defineProperty(t,"gt",{enumerable:!0,get:function(){return w.gt}}),Object.defineProperty(t,"gte",{enumerable:!0,get:function(){return w.gte}}),Object.defineProperty(t,"lt",{enumerable:!0,get:function(){return w.lt}}),Object.defineProperty(t,"lte",{enumerable:!0,get:function(){return w.lte}}),Object.defineProperty(t,"matcher",{enumerable:!0,get:function(){return w.matcher}}),Object.defineProperty(t,"regexMatches",{enumerable:!0,get:function(){return w.regexMatches}}),Object.defineProperty(t,"startsWith",{enumerable:!0,get:function(){return w.startsWith}}),Object.defineProperty(t,"newCapture",{enumerable:!0,get:function(){return T.newCapture}}),Object.defineProperty(t,"expect",{enumerable:!0,get:function(){return q.expect}}),Object.defineProperty(t,"inOrder",{enumerable:!0,get:function(){return q.inOrder}}),Object.defineProperty(t,"mock",{enumerable:!0,get:function(){return q.mock}}),Object.defineProperty(t,"partialMock",{enumerable:!0,get:function(){return q.partialMock}}),Object.defineProperty(t,"setDefaultOptions",{enumerable:!0,get:function(){return q.setDefaultOptions}}),Object.defineProperty(t,"staticMock",{enumerable:!0,get:function(){return q.staticMock}}),Object.defineProperty(t,"reset",{enumerable:!0,get:function(){return C.reset}}),Object.defineProperty(t,"verify",{enumerable:!0,get:function(){return C.verify}})}));t(N);N.newCapture,N.matcher,N.regexMatches,N.startsWith,N.lte,N.lt,N.gte,N.gt,N.eq,N.any,N.setDefaultOptions,N.inOrder,N.verify,N.reset,N.expect,N.staticMock,N.partialMock,N.mock;var $=r((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.TestRunner=t.staticMock=t.startsWith=t.setMockOptions=t.reset=t.regexMatches=t.partialMock=t.newCapture=t.matcher=t.lte=t.lt=t.inOrder=t.gte=t.gt=t.eq=t.any=t.verify=t.mock=t.assert=t.expect=void 0,Object.defineProperty(t,"TestRunner",{enumerable:!0,get:function(){return l.TestRunner}}),Object.defineProperty(t,"assert",{enumerable:!0,get:function(){return v.assert}}),Object.defineProperty(t,"any",{enumerable:!0,get:function(){return N.any}}),Object.defineProperty(t,"eq",{enumerable:!0,get:function(){return N.eq}}),Object.defineProperty(t,"expect",{enumerable:!0,get:function(){return N.expect}}),Object.defineProperty(t,"gt",{enumerable:!0,get:function(){return N.gt}}),Object.defineProperty(t,"gte",{enumerable:!0,get:function(){return N.gte}}),Object.defineProperty(t,"inOrder",{enumerable:!0,get:function(){return N.inOrder}}),Object.defineProperty(t,"lt",{enumerable:!0,get:function(){return N.lt}}),Object.defineProperty(t,"lte",{enumerable:!0,get:function(){return N.lte}}),Object.defineProperty(t,"matcher",{enumerable:!0,get:function(){return N.matcher}}),Object.defineProperty(t,"mock",{enumerable:!0,get:function(){return N.mock}}),Object.defineProperty(t,"newCapture",{enumerable:!0,get:function(){return N.newCapture}}),Object.defineProperty(t,"partialMock",{enumerable:!0,get:function(){return N.partialMock}}),Object.defineProperty(t,"regexMatches",{enumerable:!0,get:function(){return N.regexMatches}}),Object.defineProperty(t,"reset",{enumerable:!0,get:function(){return N.reset}}),Object.defineProperty(t,"setMockOptions",{enumerable:!0,get:function(){return N.setDefaultOptions}}),Object.defineProperty(t,"startsWith",{enumerable:!0,get:function(){return N.startsWith}}),Object.defineProperty(t,"staticMock",{enumerable:!0,get:function(){return N.staticMock}}),Object.defineProperty(t,"verify",{enumerable:!0,get:function(){return N.verify}})})),F=t($),W=$.TestRunner,D=$.staticMock,Q=$.startsWith,K=$.setMockOptions,G=$.reset,B=$.regexMatches,U=$.partialMock,z=$.newCapture,V=$.matcher,X=$.lte,H=$.lt,J=$.inOrder,Y=$.gte,Z=$.gt,ee=$.eq,te=$.any,re=$.verify,ne=$.mock,ie=$.assert,se=$.expect;exports.TestRunner=W,exports.any=te,exports.assert=ie,exports.default=F,exports.eq=ee,exports.expect=se,exports.gt=Z,exports.gte=Y,exports.inOrder=J,exports.lt=H,exports.lte=X,exports.matcher=V,exports.mock=ne,exports.newCapture=z,exports.partialMock=U,exports.regexMatches=B,exports.reset=G,exports.setMockOptions=K,exports.startsWith=Q,exports.staticMock=D,exports.verify=re;
//# sourceMappingURL=umbra.js.map
